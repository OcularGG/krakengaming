(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2429],{4272:(e,t,s)=>{Promise.resolve().then(s.bind(s,2472))},2472:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(7573),a=s(7653),l=s(4785);let i={Low:"bg-gray-100 text-gray-800",Medium:"bg-yellow-100 text-yellow-800",High:"bg-orange-100 text-orange-800",Critical:"bg-red-100 text-red-800"},n={OPEN:"bg-green-100 text-green-800",IN_PROGRESS:"bg-blue-100 text-blue-800",RESOLVED:"bg-purple-100 text-purple-800",CLOSED:"bg-gray-100 text-gray-800"};function o(){let{data:e}=(0,l.kP)(),[t,s]=(0,a.useState)([]),[o,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[y,g]=(0,a.useState)({title:"",description:"",severity:"Medium",reporterDiscordUsername:"",browser:"",reporterEmail:""});(0,a.useEffect)(()=>{v()},[m,p]);let v=async()=>{try{d(!0);let e=new URLSearchParams;m&&e.append("severity",m),p&&e.append("status",p);let t=await fetch("/api/bug-reports?".concat(e.toString()));if(!t.ok)throw Error("Failed to fetch bug reports");let r=await t.json();s(r.bugReports||[])}catch(e){u(e instanceof Error?e.message:"Failed to fetch bug reports")}finally{d(!1)}},j=async e=>{e.preventDefault();try{let e=await fetch("/api/bug-reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to submit bug report")}g({title:"",description:"",severity:"Medium",reporterDiscordUsername:"",browser:"",reporterEmail:""}),f(!1),v(),alert("Bug report submitted successfully!")}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Failed to submit bug report"))}},N=async(e,t)=>{try{if(!(await fetch("/api/bug-reports",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:t})})).ok)throw Error("Failed to update bug status");v()}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Failed to update bug status"))}};return(0,r.jsx)("div",{className:"bg-gradient-to-br from-ocean-dark via-ocean-medium to-ocean-light py-8 pt-20",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"neo-brutal-box bg-sail-white p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-navy-dark",style:{fontFamily:"Cinzel, serif"},children:"\uD83D\uDC1B Bug Reports"}),(0,r.jsx)("p",{className:"text-navy-dark/70 mt-2",style:{fontFamily:"Crimson Text, serif"},children:"Track and report issues with the KrakenGaming platform"})]}),e&&(0,r.jsx)("button",{onClick:()=>f(!h),className:"neo-brutal-button bg-brass text-navy-dark px-4 py-2 font-semibold transition-colors",style:{fontFamily:"Cinzel, serif"},children:h?"Cancel":"Submit Bug Report"})]})}),h&&(0,r.jsxs)("div",{className:"neo-brutal-box bg-sail-white p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-navy-dark",style:{fontFamily:"Cinzel, serif"},children:"Submit Bug Report"}),(0,r.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-navy-dark mb-2",style:{fontFamily:"Cinzel, serif"},children:"Title *"}),(0,r.jsx)("input",{type:"text",required:!0,value:y.title,onChange:e=>g(t=>({...t,title:e.target.value})),className:"w-full border-2 border-navy-dark rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brass",style:{fontFamily:"Crimson Text, serif"},placeholder:"Brief description of the bug"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-navy-dark mb-2",style:{fontFamily:"Cinzel, serif"},children:"Description *"}),(0,r.jsx)("textarea",{required:!0,rows:4,value:y.description,onChange:e=>g(t=>({...t,description:e.target.value})),className:"w-full border-2 border-navy-dark rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brass",style:{fontFamily:"Crimson Text, serif"},placeholder:"Detailed description of the issue, steps to reproduce, etc."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-navy-dark mb-2",style:{fontFamily:"Cinzel, serif"},children:"Severity"}),(0,r.jsxs)("select",{value:y.severity,onChange:e=>g(t=>({...t,severity:e.target.value})),className:"w-full border-2 border-navy-dark rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brass",style:{fontFamily:"Crimson Text, serif"},children:[(0,r.jsx)("option",{value:"Low",children:"Low"}),(0,r.jsx)("option",{value:"Medium",children:"Medium"}),(0,r.jsx)("option",{value:"High",children:"High"}),(0,r.jsx)("option",{value:"Critical",children:"Critical"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-navy-dark mb-2",style:{fontFamily:"Cinzel, serif"},children:"Discord Username *"}),(0,r.jsx)("input",{type:"text",required:!0,value:y.reporterDiscordUsername,onChange:e=>g(t=>({...t,reporterDiscordUsername:e.target.value})),className:"w-full border-2 border-navy-dark rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brass",style:{fontFamily:"Crimson Text, serif"},placeholder:"Your Discord username"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-navy-dark mb-2",style:{fontFamily:"Cinzel, serif"},children:"Browser/Environment"}),(0,r.jsx)("input",{type:"text",value:y.browser,onChange:e=>g(t=>({...t,browser:e.target.value})),className:"w-full border-2 border-navy-dark rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brass",style:{fontFamily:"Crimson Text, serif"},placeholder:"Chrome 120, Firefox 115, etc."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-navy-dark mb-2",style:{fontFamily:"Cinzel, serif"},children:"Email (Optional)"}),(0,r.jsx)("input",{type:"email",value:y.reporterEmail,onChange:e=>g(t=>({...t,reporterEmail:e.target.value})),className:"w-full border-2 border-navy-dark rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brass",style:{fontFamily:"Crimson Text, serif"},placeholder:"your.email@example.com"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{type:"submit",className:"neo-brutal-button bg-brass text-navy-dark px-6 py-2 font-semibold transition-colors",style:{fontFamily:"Cinzel, serif"},children:"Submit Bug Report"}),(0,r.jsx)("button",{type:"button",onClick:()=>f(!1),className:"neo-brutal-button bg-cannon-smoke text-sail-white px-6 py-2 font-semibold transition-colors",style:{fontFamily:"Cinzel, serif"},children:"Cancel"})]})]})]}),(0,r.jsx)("div",{className:"neo-brutal-box bg-sail-white p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-navy-dark mb-2",style:{fontFamily:"Cinzel, serif"},children:"Filter by Severity"}),(0,r.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"border-2 border-navy-dark rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brass",style:{fontFamily:"Crimson Text, serif"},children:[(0,r.jsx)("option",{value:"",children:"All Severities"}),(0,r.jsx)("option",{value:"Critical",children:"Critical"}),(0,r.jsx)("option",{value:"High",children:"High"}),(0,r.jsx)("option",{value:"Medium",children:"Medium"}),(0,r.jsx)("option",{value:"Low",children:"Low"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-navy-dark mb-2",style:{fontFamily:"Cinzel, serif"},children:"Filter by Status"}),(0,r.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Statuses"}),(0,r.jsx)("option",{value:"OPEN",children:"Open"}),(0,r.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,r.jsx)("option",{value:"RESOLVED",children:"Resolved"}),(0,r.jsx)("option",{value:"CLOSED",children:"Closed"})]})]})]})}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Bug Reports (",t.length,")"]})}),o?(0,r.jsxs)("div",{className:"p-6 text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading bug reports..."})]}):c?(0,r.jsxs)("div",{className:"p-6 text-center text-red-600",children:[(0,r.jsxs)("p",{children:["Error: ",c]}),(0,r.jsx)("button",{onClick:v,className:"mt-2 text-blue-600 hover:text-blue-800",children:"Try Again"})]}):0===t.length?(0,r.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,r.jsx)("p",{children:"No bug reports found."}),e&&(0,r.jsx)("button",{onClick:()=>f(!0),className:"mt-2 text-blue-600 hover:text-blue-800",children:"Submit the first bug report"})]}):(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:t.map(t=>{var s;return(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t.title}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(i[t.severity]),children:t.severity}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(n[t.status]||"bg-gray-100 text-gray-800"),children:t.status})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-3",children:t.description}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:(0,r.jsxs)("p",{children:["Reported by: ",(null===(s=t.reporter)||void 0===s?void 0:s.username)||"Anonymous"," • Created: ",new Date(t.createdAt).toLocaleDateString()," • Updated: ",new Date(t.updatedAt).toLocaleDateString()]})})]}),e&&(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsxs)("select",{value:t.status,onChange:e=>N(t.id,e.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"OPEN",children:"Open"}),(0,r.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,r.jsx)("option",{value:"RESOLVED",children:"Resolved"}),(0,r.jsx)("option",{value:"CLOSED",children:"Closed"})]})})]})},t.id)})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4785,1174,8765,1744],()=>t(4272)),_N_E=e.O()}]);