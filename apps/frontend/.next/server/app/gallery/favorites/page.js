(()=>{var e={};e.id=7964,e.ids=[7964],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},9514:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=a(329),s=a(7868),i=a(6041),l=a.n(i),n=a(9962),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let d=["",{children:["gallery",{children:["favorites",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1975)),"C:\\Users\\tijer\\OneDrive\\Documents\\krakengaming\\apps\\frontend\\src\\app\\gallery\\favorites\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,154))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,6560)),"C:\\Users\\tijer\\OneDrive\\Documents\\krakengaming\\apps\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,6833)),"C:\\Users\\tijer\\OneDrive\\Documents\\krakengaming\\apps\\frontend\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,154))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\tijer\\OneDrive\\Documents\\krakengaming\\apps\\frontend\\src\\app\\gallery\\favorites\\page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/gallery/favorites/page",pathname:"/gallery/favorites",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2319:(e,t,a)=>{Promise.resolve().then(a.bind(a,1038))},1038:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(5697),s=a(6336),i=a(718),l=a(1043),n=a(649);let o=({src:e,alt:t,className:a="",onError:i})=>{let[l,n]=(0,s.useState)(null),[o,d]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let t=new Image;t.onload=()=>{n(e),d(!1)},t.onerror=()=>{d(!1),i&&i()},t.src=e},[e,i]),(0,r.jsxs)("div",{className:`${a} relative`,children:[o&&(0,r.jsx)("div",{className:"absolute inset-0 bg-navy-dark/10 animate-pulse flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-navy-dark",children:"⚓"})}),l&&(0,r.jsx)("img",{src:l,alt:t,className:a,onLoad:()=>d(!1),onError:i}),!l&&!o&&(0,r.jsx)("div",{className:`${a} bg-navy-dark/5 flex items-center justify-center`,children:(0,r.jsx)("div",{className:"text-navy-dark/50",children:"Failed to load"})})]})};function d(){let{data:e,status:t}=(0,i.k)();(0,l.useRouter)();let[a,d]=(0,s.useState)([]),[c,m]=(0,s.useState)(!0),[x,u]=(0,s.useState)(null);(0,s.useCallback)(async()=>{if(e?.user){m(!0);try{let t=await fetch(`/api/gallery?feature=favorites&userId=${e.user.id||"dev-user"}`),a=await t.json();if(a.favorites&&a.favorites.length>0){let e=await fetch("/api/gallery?limit=1000"),t=await e.json(),r=a.favorites.map(e=>e.galleryItemId),s=t.items.filter(e=>r.includes(e.id)).sort((e,t)=>{let r=a.favorites.find(t=>t.galleryItemId===e.id),s=a.favorites.find(e=>e.galleryItemId===t.id);return new Date(s?.createdAt||0).getTime()-new Date(r?.createdAt||0).getTime()});d(s)}else d([])}catch(e){console.error("Failed to fetch favorites:",e),d([])}finally{m(!1)}}},[e]);let p=async t=>{if(e?.user)try{(await fetch("/api/gallery?feature=favorite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({galleryItemId:t,userId:e.user.id||"dev-user"})})).ok&&d(e=>e.filter(e=>e.id!==t))}catch(e){console.error("Failed to remove favorite:",e)}},v=e=>new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),h=e=>`${window.location.origin}/gallery/${e.id}`,f=async e=>{let t=h(e);if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:t})}catch(e){await navigator.clipboard.writeText(t),alert("Share link copied to clipboard!")}else await navigator.clipboard.writeText(t),alert("Share link copied to clipboard!")};return"loading"===t?(0,r.jsx)("div",{className:"min-h-screen bg-sail-white pt-24 pb-12",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"text-navy-dark",children:"Loading..."})})})}):e?(0,r.jsx)("div",{className:"min-h-screen bg-sail-white pt-24 pb-12",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-navy-dark mb-4",style:{fontFamily:"Cinzel, serif"},children:"My Favorites"}),(0,r.jsx)("p",{className:"text-lg text-navy-dark/70",children:"Your collection of favorited gallery items"}),(0,r.jsx)(n.default,{href:"/gallery",className:"inline-block mt-4 text-brass hover:text-brass-bright transition-colors duration-200",style:{fontFamily:"Cinzel, serif"},children:"← Back to Gallery"})]}),c?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("div",{className:"text-navy-dark",children:"Loading your favorites..."})}):0===a.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-navy-dark/70 mb-4",children:"You haven't favorited any items yet."}),(0,r.jsx)(n.default,{href:"/gallery",className:"neo-brutal-button bg-brass text-navy-dark px-6 py-3",style:{fontFamily:"Cinzel, serif"},children:"Browse Gallery"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(e=>(0,r.jsxs)("div",{className:"neo-brutal-box p-4 bg-sail-white hover:shadow-lg transition-shadow duration-200",children:[(0,r.jsx)("div",{className:"cursor-pointer",onClick:()=>u({item:e,type:e.type}),children:"image"===e.type?(0,r.jsx)(o,{src:e.thumbnail||e.url,alt:e.title,className:"w-full h-48 object-cover mb-3"}):(0,r.jsxs)("div",{className:"relative w-full h-48 mb-3",children:[(0,r.jsx)(o,{src:e.thumbnail||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMmEyYTJhIi8+CjxjaXJjbGUgY3g9IjE1MCIgY3k9IjEwMCIgcj0iMjAiIGZpbGw9IiM0ZDRkNGQiLz4KPC9zdmc+",alt:e.title,className:"w-full h-full object-cover"}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-brass rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-navy-dark",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M8 5v14l11-7z"})})})})]})}),(0,r.jsx)("h3",{className:"font-semibold text-navy-dark mb-2 line-clamp-2",style:{fontFamily:"Cinzel, serif"},children:e.title}),(0,r.jsx)("p",{className:"text-sm text-navy-dark/70 mb-3 line-clamp-2",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-navy-dark/60 mb-3",children:[(0,r.jsxs)("span",{children:["By ",e.uploader]}),(0,r.jsx)("span",{children:v(e.createdAt)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-navy-dark/60 mb-3",children:[(0,r.jsxs)("span",{children:["▲ ",e.upvotes," upvotes"]}),(0,r.jsxs)("span",{children:[e.viewCount," views"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>f(e),className:"flex-1 neo-brutal-button bg-brass/20 text-navy-dark py-2 text-sm hover:bg-brass/40 transition-colors duration-200",children:"Share"}),(0,r.jsx)("button",{onClick:()=>p(e.id),className:"flex-1 neo-brutal-button bg-red-100 text-red-700 py-2 text-sm hover:bg-red-200 transition-colors duration-200",children:"Remove"})]})]},e.id))}),x&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"relative max-w-4xl max-h-full",children:[(0,r.jsx)("button",{onClick:()=>u(null),className:"absolute top-4 right-4 z-10 w-10 h-10 bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center transition-colors duration-200",children:"✕"}),"image"===x.type?(0,r.jsx)("img",{src:x.item.url,alt:x.item.title,className:"max-w-full max-h-full object-contain"}):(0,r.jsx)("video",{src:x.item.url,controls:!0,className:"max-w-full max-h-full",autoPlay:!0})]})})]})}):null}},1975:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>e});var s=a(1909);let e=(await (0,s.createProxy)(String.raw`C:\Users\tijer\OneDrive\Documents\krakengaming\apps\frontend\src\app\gallery\favorites\page.tsx`)).default;r()}catch(e){r(e)}},1)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[9769,869,3429],()=>a(9514));module.exports=r})();