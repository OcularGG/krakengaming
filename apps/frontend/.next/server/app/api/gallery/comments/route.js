(()=>{var e={};e.id=5625,e.ids=[5625],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3189:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>j,routeModule:()=>l,serverHooks:()=>f,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>g});var n={};t.r(n),t.d(n,{DELETE:()=>p,GET:()=>c,POST:()=>m,PUT:()=>d});var s=t(5122),o=t(7868),a=t(9769),u=t(1929);let i=[];async function m(e){try{let{itemId:r,userId:t,userName:n,content:s}=await e.json();if(!r||!t||!n||!s)return u.NextResponse.json({error:"Missing required fields"},{status:400});if(0===s.trim().length)return u.NextResponse.json({error:"Comment cannot be empty"},{status:400});if(s.length>1e3)return u.NextResponse.json({error:"Comment too long (max 1000 characters)"},{status:400});let o={id:Date.now().toString(),galleryItemId:r,userId:t,userName:n,content:s.trim(),createdAt:new Date().toISOString()};return i.push(o),u.NextResponse.json({comment:o},{status:201})}catch(e){return console.error("Comment POST error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}async function c(e){try{let{searchParams:r}=new URL(e.url),t=r.get("itemId");if(!t)return u.NextResponse.json({error:"Item ID required"},{status:400});let n=i.filter(e=>e.galleryItemId===t).sort((e,r)=>new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime());return u.NextResponse.json({comments:n},{status:200})}catch(e){return console.error("Comment GET error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}async function p(e){try{let{searchParams:r}=new URL(e.url),t=r.get("commentId"),n=r.get("userId");if(!t||!n)return u.NextResponse.json({error:"Comment ID and User ID required"},{status:400});let s=i.findIndex(e=>e.id===t&&e.userId===n);if(-1===s)return u.NextResponse.json({error:"Comment not found or unauthorized"},{status:404});return i.splice(s,1),u.NextResponse.json({success:!0},{status:200})}catch(e){return console.error("Comment DELETE error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){try{let{commentId:r,userId:t,content:n}=await e.json();if(!r||!t||!n)return u.NextResponse.json({error:"Missing required fields"},{status:400});if(0===n.trim().length)return u.NextResponse.json({error:"Comment cannot be empty"},{status:400});if(n.length>1e3)return u.NextResponse.json({error:"Comment too long (max 1000 characters)"},{status:400});let s=i.findIndex(e=>e.id===r&&e.userId===t);if(-1===s)return u.NextResponse.json({error:"Comment not found or unauthorized"},{status:404});return i[s]={...i[s],content:n.trim(),updatedAt:new Date().toISOString()},u.NextResponse.json({comment:i[s]},{status:200})}catch(e){return console.error("Comment PUT error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/gallery/comments/route",pathname:"/api/gallery/comments",filename:"route",bundlePath:"app/api/gallery/comments/route"},resolvedPagePath:"C:\\Users\\tijer\\OneDrive\\Documents\\krakengaming\\apps\\frontend\\src\\app\\api\\gallery\\comments\\route.ts",nextConfigOutput:"standalone",userland:n}),{workAsyncStorage:x,workUnitAsyncStorage:g,serverHooks:f}=l;function j(){return(0,a.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:g})}},3245:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[9769,4999],()=>t(3189));module.exports=n})();